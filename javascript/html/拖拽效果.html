<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>拖拽</title>
    <style type="text/css">
        #box{
            width:100px;
            height:100px;
            background-color:red;
            position:absolute;
        }
    </style>
</head>
<body style="height:3000px">
    <div id="box"></div>

    <script type="text/javascript">
        var div = document.getElementById("box");

        var basex = 0
        var basey = 0
        var movex = 0
        var movey = 0

        /*有点问题，根据初始位置计算
        div.onmousedown = function(e){
            basex = e.pageX;
            basey = e.pageY;

            document.onmousemove = function(ee){
                movex = ee.pageX - basex
                basex = ee.pageX

                movey = ee.pageX - basey
                basey = ee.pageY


                div.style.left = div.offsetLeft + movex + "px"
                div.style.top = div.offsetTop + movey + "px"
            }
        }
        */
        /*没有问题，根据边界计算*/
        document.onmousedown = function (e) {
            var disx = e.pageX - div.offsetLeft;
            var disy = e.pageY - div.offsetTop;
            document.onmousemove = function (e) {
                div.style.left = e.pageX - disx + 'px';
                div.style.top = e.pageY - disy + 'px';
            }
            }

        document.addEventListener("mouseup",function(e){
            document.onmousemove = null;
        },false)
    </script>
</body>
</html>